(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=require("express");var t=e.n(r);const n=require("cors");var o=e.n(n);const i=require("helmet");var s=e.n(i);require("morgan");require("fs");const a=require("path");var c=e.n(a);const u=require("express-session");var l=e.n(u);const p=require("dotenv");var d=process.env,f=d.REDIS_PORT,v=void 0===f?6379:f,h=d.REDIS_HOST,O=void 0===h?"redis":h,S=d.REDIS_PASSWORD,b={port:+v,host:O,password:void 0===S?"secret":S},y=process.env,g=y.POSTGRESQL_USER,w=void 0===g?"admin":g,P=y.POSTGRESQL_PASSWORD,E=void 0===P?"admin":P,j=y.POSTGRESQL_PORT,R=void 0===j?"5432":j,m=y.POSTGRESQL_HOST,T=void 0===m?"localhost":m,_=process.env.DATABASE_URL,q=(void 0===_&&"postgres://".concat(w,":").concat(E,"@").concat(T,":").concat(R),process.env),D=q.SESSION_SECRET,M=void 0===D?"secret":D,k=q.SESSION_NAME,A=void 0===k?"sid":k,I=q.SESSION_TIMEOUT,x={secret:M,name:A,cookie:{maxAge:+(void 0===I?216e5:I),secure:!0},resave:!1,saveUninitialized:!1,rolling:!0},C=process.env,L=C.PORT;(0,p.config)();const G=require("ioredis");var N=e.n(G);const Q=require("connect-redis");var U=e.n(Q);function z(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const H=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.RedisStore=U()(l()),this.redisClient=new(N())(b),this.redisClient.on("error",(function(){throw"Error connecting with redis client"}))}var r,t,n;return r=e,(t=[{key:"redisStore",get:function(){return new this.RedisStore({client:this.redisClient})}}])&&z(r.prototype,t),n&&z(r,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function B(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?B(Object(t),!0).forEach((function(r){J(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function F(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}(new(function(){function e(){var r=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),J(this,"logPath",c().join(__dirname,"..","logs","access.log")),J(this,"handleMiscRoutes",(function(){r.app.get("/",(function(e,r){r.status(200).json({error:null,data:{server:"Base-Healthy"}})})),r.app.all("*",(function(e,r){r.status(404).json({error:"Requested route doesn't exist - 404",data:null})}))})),J(this,"configureExpressSessionMiddleware",(function(){r.app.use(l()(W(W({},x),{},{store:r.redisStore})))})),this.app=t()(),this.port=+L||4e3,this.redisStore=(new H).redisStore,this.initializeMiddlewares(),this.handleMiscRoutes(),this.configureExpressSessionMiddleware()}var r,n,i;return r=e,(n=[{key:"listen",value:function(){var e=this;this.app.listen(this.port,(function(){console.log("Server is up on the port: ".concat(e.port))}))}},{key:"initializeMiddlewares",value:function(){this.app.use(o()()),this.app.use(t().json()),this.app.use(s()())}}])&&F(r.prototype,n),i&&F(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}())).listen()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUNBLElBQUlBLEVBQXNCLENDQTFCQSxFQUF5QkMsSUFDeEIsSUFBSUMsRUFBU0QsR0FBVUEsRUFBT0UsV0FDN0IsSUFBT0YsRUFBaUIsUUFDeEIsSUFBTSxFQUVQLE9BREFELEVBQW9CSSxFQUFFRixFQUFRLENBQUVHLEVBQUdILElBQzVCQSxDQUFNLEVDTGRGLEVBQXdCLENBQUNNLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFAsRUFBb0JTLEVBQUVGLEVBQVlDLEtBQVNSLEVBQW9CUyxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRTFFLEVDTkRSLEVBQXdCLENBQUNjLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLElDQWxGLE1BQU0sRUFBK0JJLFFBQVEsVyxhQ0E3QyxNQUFNLEVBQStCQSxRQUFRLFEsYUNBN0MsTUFBTSxFQUErQkEsUUFBUSxVLGFDQVJBLFFBQVEsVUNBUkEsUUFBUSxNQ0E3QyxNQUFNLEVBQStCQSxRQUFRLFEsYUNBN0MsTUFBTSxFQUErQkEsUUFBUSxtQixhQ0E3QyxNQUFNLEVBQStCQSxRQUFRLFVDRTdDLE1BSUlDLFFBQVFDLElBSlosSUFDRUMsV0FBQUEsT0FERixNQUNlLEtBRGYsTUFFRUMsV0FBQUEsT0FGRixNQUVlLFFBRmYsTUFHRUMsZUFHV0MsRUFBOEIsQ0FDekNDLE1BQU9KLEVBQ1BLLEtBQU1KLEVBQ05LLGNBVEYsTUFHbUIsU0FIbkIsR0NGTyxFQUtIUixRQUFRQyxJQUxMLElBQ0xRLGdCQUFBQSxPQURLLE1BQ2EsUUFEYixNQUVMQyxvQkFBQUEsT0FGSyxNQUVpQixRQUZqQixNQUdMQyxnQkFBQUEsT0FISyxNQUdhLE9BSGIsTUFJTEMsZ0JBQUFBLE9BSkssTUFJYSxZQUpiLEVBT0EsRUFFSFosUUFBUUMsSUFEVlksYUNKRixRREdPLDRCQUN3QkosRUFEeEIsWUFDMkNDLEVBRDNDLFlBQ2tFRSxFQURsRSxZQUNxRkQsR0NBeEZYLFFBQVFDLEtBSlosSUFDRWEsZUFBQUEsT0FERixNQUNtQixTQURuQixNQUVFQyxhQUFBQSxPQUZGLE1BRWlCLE1BRmpCLE1BR0VDLGdCQUdXQyxFQUFrQyxDQUM3Q0MsT0FBUUosRUFDUkssS0FBTUosRUFDTkssT0FBUSxDQUNOQyxjQVZKLE1BRmtCLE1BRWxCLEdBV0lDLFFBQVEsR0FFVkMsUUFBUSxFQUNSQyxtQkFBbUIsRUFDbkJDLFNBQVMsR0NuQkosRUFBMkJ6QixRQUFRQyxJQUFqQnlCLEVBQWxCLEVBQWtCQSxNQ0N6QkMsRUFBQUEsRUFBQUEsVUNEQSxNQUFNLEVBQStCNUIsUUFBUSxXLGFDQTdDLE1BQU0sRUFBK0JBLFFBQVEsaUIsbUxDOEI3QyxRQXpCTTZCLFdBSUosYyw0RkFBZSxTQUViQyxLQUFLQyxXQUFhQyxJQUFhQyxLQUcvQkgsS0FBS0ksWUFBYyxJQUFJQyxJQUFKLENBQVU3QixHQUU3QndCLEtBQUtJLFlBQVlFLEdBQUcsU0FBUyxXQUMzQixLQUFNLG9DQUNQLEdBQ0YsQywrQ0FLRCxXQUVFLE9BQU8sSUFBSU4sS0FBS0MsV0FBVyxDQUFFTSxPQUFRUCxLQUFLSSxhQUMzQyxNLGdGQXRCR0wsRyw4MUJDSk0sSUNTTlMsV0FXSixhQUFlLFksNEZBQUEsMEJBUldDLElBQUFBLEtBQ3hCQyxVQUNBLEtBQ0EsT0FDQSxlQUlhLDJCQWlEWSxXQUl6QixFQUFLQyxJQUFJL0MsSUFBSSxLQUFLLFNBQUNnRCxFQUFLQyxHQUN0QkEsRUFBSUMsT0FBTyxLQUFLQyxLQUFLLENBQ25CQyxNQUFPLEtBQ1BDLEtBQU0sQ0FDSkMsT0FBUSxpQkFHYixJQUtELEVBQUtQLElBQUlRLElBQUksS0FBSyxTQUFDUCxFQUFLQyxHQUN0QkEsRUFBSUMsT0FBTyxLQUFLQyxLQUFLLENBQ25CQyxNQUFPLHNDQUNQQyxLQUFNLE1BRVQsR0FDRixJQXZFYyw0Q0E0RTZCLFdBQzFDLEVBQUtOLElBQUlTLElBQ1BqQixJQUFRLEVBQUQsS0FDRmYsR0FERSxJQUlMaUMsTUFBTyxFQUFLQyxjQUdqQixJQXBGQ3RCLEtBQUtXLElBQU1ZLE1BQ1h2QixLQUFLdkIsTUFBUW9CLEdBQVMsSUFHdEJHLEtBQUtzQixZQUFhLElBQUl2QixHQUFpQnVCLFdBRXZDdEIsS0FBS3dCLHdCQUNMeEIsS0FBS3lCLG1CQUNMekIsS0FBSzBCLG1DQUNOLEMsNkNBRUQsV0FBaUIsV0FDZjFCLEtBQUtXLElBQUlnQixPQUFPM0IsS0FBS3ZCLE1BQU0sV0FFekJtRCxRQUFRQyxJQUFSLG9DQUF5QyxFQUFLcEQsTUFDL0MsR0FDRixHLG1DQUtELFdBQ0V1QixLQUFLVyxJQUFJUyxJQUFJVSxPQUNiOUIsS0FBS1csSUFBSVMsSUFBSUcsSUFBQUEsUUFLYnZCLEtBQUtXLElBQUlTLElBQUlXLE1Ba0JkLE0sZ0ZBMURHdkIsS0RQRm1CLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vc2xhc2gtYmUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29zbGFzaC1iZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL2V4dGVybmFsIGNvbW1vbmpzIFwiZXhwcmVzc1wiIiwid2VicGFjazovL29zbGFzaC1iZS9leHRlcm5hbCBjb21tb25qcyBcImNvcnNcIiIsIndlYnBhY2s6Ly9vc2xhc2gtYmUvZXh0ZXJuYWwgY29tbW9uanMgXCJoZWxtZXRcIiIsIndlYnBhY2s6Ly9vc2xhc2gtYmUvZXh0ZXJuYWwgY29tbW9uanMgXCJtb3JnYW5cIiIsIndlYnBhY2s6Ly9vc2xhc2gtYmUvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImZzXCIiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJwYXRoXCIiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL2V4dGVybmFsIGNvbW1vbmpzIFwiZXhwcmVzcy1zZXNzaW9uXCIiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL2V4dGVybmFsIGNvbW1vbmpzIFwiZG90ZW52XCIiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlLy4vc3JjL2NvbmZpZy9jYWNoZS5jb25maWcudHMiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlLy4vc3JjL2NvbmZpZy9kYi5jb25maWcudHMiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlLy4vc3JjL2NvbmZpZy9zZXNzaW9uLmNvbmZpZy50cyIsIndlYnBhY2s6Ly9vc2xhc2gtYmUvLi9zcmMvY29uZmlnL2FwcC5jb25maWcudHMiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlLy4vc3JjL2NvbmZpZy9pbmRleC50cyIsIndlYnBhY2s6Ly9vc2xhc2gtYmUvZXh0ZXJuYWwgY29tbW9uanMgXCJpb3JlZGlzXCIiLCJ3ZWJwYWNrOi8vb3NsYXNoLWJlL2V4dGVybmFsIGNvbW1vbmpzIFwiY29ubmVjdC1yZWRpc1wiIiwid2VicGFjazovL29zbGFzaC1iZS8uL3NyYy9zZXJ2aWNlcy9yZWRpcy9yZWRpcy5zZXJ2aWNlLnRzIiwid2VicGFjazovL29zbGFzaC1iZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9vc2xhc2gtYmUvLi9zcmMvYXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImV4cHJlc3NcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJjb3JzXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiaGVsbWV0XCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwibW9yZ2FuXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZnNcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZXhwcmVzcy1zZXNzaW9uXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZG90ZW52XCIpOyIsImltcG9ydCB7IFJlZGlzT3B0aW9ucyB9IGZyb20gXCJpb3JlZGlzXCI7XG5cbmNvbnN0IHtcbiAgUkVESVNfUE9SVCA9IDYzNzksXG4gIFJFRElTX0hPU1QgPSBcInJlZGlzXCIsIC8vYWxzbyByZWZlcmVuY2VzIGFzIFJFRElTX1VSTCAvL3VzaW5nIHJlZGlzIGFzIHZhbHVlIGRlZmF1bHRzIHRvIHRoZSBkb2NrZXIgaW1hZ2UgdGhhdCB3ZSBoYXZlXG4gIFJFRElTX1BBU1NXT1JEID0gXCJzZWNyZXRcIixcbn0gPSBwcm9jZXNzLmVudjtcblxuZXhwb3J0IGNvbnN0IFJFRElTX09QVElPTlM6IFJlZGlzT3B0aW9ucyA9IHtcbiAgcG9ydDogK1JFRElTX1BPUlQsXG4gIGhvc3Q6IFJFRElTX0hPU1QsXG4gIHBhc3N3b3JkOiBSRURJU19QQVNTV09SRCxcbn07XG4iLCJleHBvcnQgY29uc3Qge1xuICBQT1NUR1JFU1FMX1VTRVIgPSBcImFkbWluXCIsXG4gIFBPU1RHUkVTUUxfUEFTU1dPUkQgPSBcImFkbWluXCIsXG4gIFBPU1RHUkVTUUxfUE9SVCA9IFwiNTQzMlwiLFxuICBQT1NUR1JFU1FMX0hPU1QgPSBcImxvY2FsaG9zdFwiLFxufSA9IHByb2Nlc3MuZW52O1xuXG5leHBvcnQgY29uc3Qge1xuICBEQVRBQkFTRV9VUkwgPSBgcG9zdGdyZXM6Ly8ke1BPU1RHUkVTUUxfVVNFUn06JHtQT1NUR1JFU1FMX1BBU1NXT1JEfUAke1BPU1RHUkVTUUxfSE9TVH06JHtQT1NUR1JFU1FMX1BPUlR9YCxcbn0gPSBwcm9jZXNzLmVudjtcbiIsImltcG9ydCB7IFNlc3Npb25PcHRpb25zIH0gZnJvbSBcImV4cHJlc3Mtc2Vzc2lvblwiO1xuXG5jb25zdCBTSVhfSE9VUlMgPSAxMDAwICogNjAgKiA2MCAqIDY7XG5cbmNvbnN0IHtcbiAgU0VTU0lPTl9TRUNSRVQgPSBcInNlY3JldFwiLFxuICBTRVNTSU9OX05BTUUgPSBcInNpZFwiLFxuICBTRVNTSU9OX1RJTUVPVVQgPSBTSVhfSE9VUlMsXG59ID0gcHJvY2Vzcy5lbnY7XG5cbmV4cG9ydCBjb25zdCBTRVNTSU9OX09QVElPTlM6IFNlc3Npb25PcHRpb25zID0ge1xuICBzZWNyZXQ6IFNFU1NJT05fU0VDUkVULFxuICBuYW1lOiBTRVNTSU9OX05BTUUsXG4gIGNvb2tpZToge1xuICAgIG1heEFnZTogK1NFU1NJT05fVElNRU9VVCxcbiAgICBzZWN1cmU6IHRydWUsXG4gIH0sXG4gIHJlc2F2ZTogZmFsc2UsXG4gIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgcm9sbGluZzogdHJ1ZSwgLy9yb2xsIHRoZSBzZXNzaW9uIGkuZS4ga2VlcCBpdCBhbGl2ZSBldmVuIGFmdGVyIHNpeCBob3VycyBpZiB0aGUgdXNlciBpcyBhY3RpdmVcbn07XG4iLCJleHBvcnQgY29uc3QgeyBOT0RFX0VOViwgUE9SVCB9ID0gcHJvY2Vzcy5lbnY7XG4iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiZG90ZW52XCI7XG5jb25maWcoKTtcblxuZXhwb3J0ICogZnJvbSBcIi4vY2FjaGUuY29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kYi5jb25maWdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3Nlc3Npb24uY29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9hcHAuY29uZmlnXCI7XG4iLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImlvcmVkaXNcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJjb25uZWN0LXJlZGlzXCIpOyIsImltcG9ydCBSZWRpcyBmcm9tIFwiaW9yZWRpc1wiO1xuaW1wb3J0IGNvbm5lY3RSZWRpcywgeyBSZWRpc1N0b3JlIH0gZnJvbSBcImNvbm5lY3QtcmVkaXNcIjtcbmltcG9ydCB7IFJFRElTX09QVElPTlMgfSBmcm9tIFwiLi4vLi4vY29uZmlnXCI7XG5pbXBvcnQgc2Vzc2lvbiBmcm9tIFwiZXhwcmVzcy1zZXNzaW9uXCI7XG5cbmNsYXNzIENvbmZpZ3VyZVJlZGlzIHtcbiAgcHJpdmF0ZSBSZWRpc1N0b3JlOiBSZWRpc1N0b3JlO1xuICBwcml2YXRlIHJlZGlzQ2xpZW50OiBSZWRpcztcblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgLy9jb25uZWN0UmVkaXMgaXMgYSBjbGFzcyB0aGF0IG1ha2VzIHVzZSBvZiBleHByZXNzLXNlc3Npb24ncyBzZXNzaW9uIHRvIGNvbm5lY3QgdG8gcmVkaXNcbiAgICB0aGlzLlJlZGlzU3RvcmUgPSBjb25uZWN0UmVkaXMoc2Vzc2lvbik7XG5cbiAgICAvL2NvbmZpZ3VyZSBhIG5ldyByZWRpcyBjbGllbnQgZnJvbSBpb3JlZGlzXG4gICAgdGhpcy5yZWRpc0NsaWVudCA9IG5ldyBSZWRpcyhSRURJU19PUFRJT05TKTtcblxuICAgIHRoaXMucmVkaXNDbGllbnQub24oXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICB0aHJvdyBcIkVycm9yIGNvbm5lY3Rpbmcgd2l0aCByZWRpcyBjbGllbnRcIjtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIG5ldyByZWRpcyBzdG9yZSB0byB3b3JrIHdpdGggdGhlIGV4cHJlc3Mtc2Vzc2lvbiBtaWRkbGV3YXJlXG4gICAqL1xuICBwdWJsaWMgZ2V0IHJlZGlzU3RvcmUgKCk6IFJlZGlzU3RvcmUge1xuICAgIC8vY3JlYXRpbmcgYSBuZXcgaW5zdGFuY2Ugb2YgcmVkaXMgc3RvcmUgY2xhc3Mgd2l0aCBvdXIgcHJlLWNvbmZpZ3VyZWQgcmVkaXMgY2xpZW50XG4gICAgcmV0dXJuIG5ldyB0aGlzLlJlZGlzU3RvcmUoeyBjbGllbnQ6IHRoaXMucmVkaXNDbGllbnQgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29uZmlndXJlUmVkaXM7XG4iLCJpbXBvcnQgQXBwIGZyb20gXCIuL2FwcFwiO1xuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xuXG5hcHAubGlzdGVuKCk7XG5cblxuXG5cblxuXG4vLyBpbXBvcnQgZXhwcmVzcywgeyBBcHBsaWNhdGlvbiB9IGZyb20gXCJleHByZXNzXCI7XG4vLyBpbXBvcnQgY29ycyBmcm9tIFwiY29yc1wiO1xuLy8gaW1wb3J0IGhlbG1ldCBmcm9tIFwiaGVsbWV0XCI7XG4vLyBpbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIjtcbi8vIGltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbi8vIGltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG4vLyBpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwicmVkaXNcIjtcbi8vIGltcG9ydCBzZXNzaW9uIGZyb20gXCJleHByZXNzLXNlc3Npb25cIjtcbi8vIGltcG9ydCBjb25uZWN0UmVkaXMsIHsgUmVkaXNTdG9yZSB9IGZyb20gXCJjb25uZWN0LXJlZGlzXCI7XG4vLyBpbXBvcnQge1xuLy8gICBOT0RFX0VOVixcbi8vICAgUE9SVCxcbi8vICAgUkVESVNfT1BUSU9OUyxcbi8vICAgU0VTU0lPTl9PUFRJT05TLFxuLy8gfSBmcm9tIFwiLi9jb25maWdcIjtcbi8vIGltcG9ydCB7IFJlZGlzQ2xpZW50VHlwZSB9IGZyb20gXCJAcmVkaXMvY2xpZW50XCI7XG5cbi8vIGNsYXNzIEFwcCB7XG4vLyAgIHByaXZhdGUgYXBwOiBBcHBsaWNhdGlvbjtcbi8vICAgcHJpdmF0ZSBwb3J0OiBudW1iZXI7XG4vLyAgIHByaXZhdGUgbG9nUGF0aDogc3RyaW5nID0gcGF0aC5qb2luKFxuLy8gICAgIF9fZGlybmFtZSxcbi8vICAgICBcIi4uXCIsXG4vLyAgICAgXCJsb2dzXCIsXG4vLyAgICAgXCJhY2Nlc3MubG9nXCIsXG4vLyAgICk7XG4vLyAgIHByaXZhdGUgcmVkaXNTdG9yZTogUmVkaXNTdG9yZTtcbi8vICAgcHJpdmF0ZSByZWRpc0NsaWVudDogUmVkaXNDbGllbnRUeXBlO1xuXG4vLyAgIGNvbnN0cnVjdG9yICgpIHtcbi8vICAgICB0aGlzLmFwcCA9IGV4cHJlc3MoKTtcbi8vICAgICB0aGlzLnBvcnQgPSArUE9SVCEgfHwgNDAwMDtcbi8vICAgICB0aGlzLnJlZGlzU3RvcmUgPSBjb25uZWN0UmVkaXMoc2Vzc2lvbik7XG4vLyAgICAgdGhpcy5yZWRpc0NsaWVudCA9IGNyZWF0ZUNsaWVudChSRURJU19PUFRJT05TKTtcblxuLy8gICAgIHRoaXMuaW5pdGlhbGl6ZU1pZGRsZXdhcmVzKCk7XG4vLyAgICAgdGhpcy5oYW5kbGVNaXNjUm91dGVzKCk7XG4vLyAgIH1cblxuLy8gICBwdWJsaWMgbGlzdGVuICgpIHtcbi8vICAgICB0aGlzLmFwcC5saXN0ZW4odGhpcy5wb3J0LCAoKSA9PiB7XG4vLyAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuLy8gICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyB1cCBvbiB0aGUgcG9ydDogJHt0aGlzLnBvcnR9YCk7XG4vLyAgICAgfSk7XG4vLyAgIH1cblxuLy8gICBwcml2YXRlIGluaXRpYWxpemVNaWRkbGV3YXJlcyAoKSB7XG4vLyAgICAgdGhpcy5hcHAudXNlKGNvcnMoKSk7XG4vLyAgICAgdGhpcy5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcblxuLy8gICAgIC8qKlxuLy8gICAgICAqIFNlY3VyaXR5IGhlYWRlcnMgdG8gYmUgYXR0YWNoZWQgd2l0aCByZXF1ZXN0c1xuLy8gICAgICAqL1xuLy8gICAgIHRoaXMuYXBwLnVzZShoZWxtZXQoKSk7XG5cbi8vICAgICAvKipcbi8vICAgICAgKiBGb3IgbG9nIHJlbGF0ZWQgc2VydmljZXMgLSBvbmx5IGZvciBkZXYgc2VydmVyXG4vLyAgICAgICovXG4vLyAgICAgaWYgKE5PREVfRU5WID09IFwiZGV2ZWxvcG1lbnRcIiB8fCBOT0RFX0VOViA9PSBcInRlc3RcIikge1xuLy8gICAgICAgY29uc3QgYWNjZXNzTG9nU3RyZWFtOiBmcy5Xcml0ZVN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKFxuLy8gICAgICAgICB0aGlzLmxvZ1BhdGgsXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICBmbGFnczogXCJhXCIsXG4vLyAgICAgICAgIH0sXG4vLyAgICAgICApO1xuLy8gICAgICAgdGhpcy5hcHAudXNlKFxuLy8gICAgICAgICBtb3JnYW4oXCJjb21tb25cIiwge1xuLy8gICAgICAgICAgIHN0cmVhbTogYWNjZXNzTG9nU3RyZWFtLFxuLy8gICAgICAgICB9KSxcbi8vICAgICAgICk7XG4vLyAgICAgfVxuLy8gICB9XG5cbi8vICAgcHJpdmF0ZSBoYW5kbGVNaXNjUm91dGVzID0gKCkgPT4ge1xuLy8gICAgIC8qKlxuLy8gICAgICAqIEJhc2Ugcm91dGUgLSB0byBjaGVjayBBUEkgaGVhbHRoXG4vLyAgICAgICovXG4vLyAgICAgdGhpcy5hcHAuZ2V0KFwiL1wiLCAocmVxLCByZXMpID0+IHtcbi8vICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbi8vICAgICAgICAgZXJyb3I6IG51bGwsXG4vLyAgICAgICAgIGRhdGE6IHtcbi8vICAgICAgICAgICBzZXJ2ZXI6IFwiQmFzZS1IZWFsdGh5XCIsXG4vLyAgICAgICAgIH0sXG4vLyAgICAgICB9KTtcbi8vICAgICB9KTtcblxuLy8gICAgIC8qKlxuLy8gICAgICAqIEhhbmRsaW5nIGFsbCB1bmRlZmluZWQgcm91dGVzXG4vLyAgICAgICovXG4vLyAgICAgdGhpcy5hcHAuYWxsKFwiKlwiLCAocmVxLCByZXMpID0+IHtcbi8vICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbi8vICAgICAgICAgZXJyb3I6IFwiUmVxdWVzdGVkIHJvdXRlIGRvZXNuJ3QgZXhpc3QgLSA0MDRcIixcbi8vICAgICAgICAgZGF0YTogbnVsbCxcbi8vICAgICAgIH0pO1xuLy8gICAgIH0pO1xuLy8gICB9O1xuXG4vLyAgIHByaXZhdGUgY29uZmlndXJlUmVkaXMgPSAoKSA9PiB7XG4vLyAgICAgdGhpcy5hcHAudXNlKFxuLy8gICAgICAgc2Vzc2lvbih7XG4vLyAgICAgICAgIC4uLlNFU1NJT05fT1BUSU9OUyxcbi8vICAgICAgICAgc3RvcmU6IG5ldyB0aGlzLnJlZGlzU3RvcmUoeyBjbGllbnQ6IHRoaXMucmVkaXNDbGllbnQgfSksXG4vLyAgICAgICB9KSxcbi8vICAgICApO1xuLy8gICB9O1xuLy8gfVxuXG4vLyBleHBvcnQgZGVmYXVsdCBBcHA7XG4iLCJpbXBvcnQgZXhwcmVzcywgeyBBcHBsaWNhdGlvbiB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgY29ycyBmcm9tIFwiY29yc1wiO1xuaW1wb3J0IGhlbG1ldCBmcm9tIFwiaGVsbWV0XCI7XG5pbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgc2Vzc2lvbiBmcm9tIFwiZXhwcmVzcy1zZXNzaW9uXCI7XG5pbXBvcnQgeyBOT0RFX0VOViwgUE9SVCwgU0VTU0lPTl9PUFRJT05TIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgQ29uZmlndXJlUmVkaXMgZnJvbSBcIi4vc2VydmljZXMvcmVkaXMvcmVkaXMuc2VydmljZVwiO1xuXG5jbGFzcyBBcHAge1xuICBwcml2YXRlIGFwcDogQXBwbGljYXRpb247XG4gIHByaXZhdGUgcG9ydDogbnVtYmVyO1xuICBwcml2YXRlIGxvZ1BhdGg6IHN0cmluZyA9IHBhdGguam9pbihcbiAgICBfX2Rpcm5hbWUsXG4gICAgXCIuLlwiLFxuICAgIFwibG9nc1wiLFxuICAgIFwiYWNjZXNzLmxvZ1wiLFxuICApO1xuICBwcml2YXRlIHJlZGlzU3RvcmU7XG5cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuYXBwID0gZXhwcmVzcygpO1xuICAgIHRoaXMucG9ydCA9ICtQT1JUISB8fCA0MDAwO1xuXG4gICAgLy9jb25maWd1cmluZyByZWRpcyBhbmQgZmV0Y2hpbmcgdGhlIHZhbHVlIG9mIHJlZGlzU3RvcmUgdGhhdCBpcyBuZXdseSBjb25maWd1cmVkIHdpdGggZXhwcmVzcy1zZXNzaW9uXG4gICAgdGhpcy5yZWRpc1N0b3JlID0gbmV3IENvbmZpZ3VyZVJlZGlzKCkucmVkaXNTdG9yZTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZU1pZGRsZXdhcmVzKCk7XG4gICAgdGhpcy5oYW5kbGVNaXNjUm91dGVzKCk7XG4gICAgdGhpcy5jb25maWd1cmVFeHByZXNzU2Vzc2lvbk1pZGRsZXdhcmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBsaXN0ZW4gKCkge1xuICAgIHRoaXMuYXBwLmxpc3Rlbih0aGlzLnBvcnQsICgpID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHVwIG9uIHRoZSBwb3J0OiAke3RoaXMucG9ydH1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUbyBoYW5kbGUgYWxsIG1pZGRsZXdhcmUtcmVsYXRlZCBwYXJ0cyAtIG1ha2luZyBpdCBtb2R1bGFyIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHRlc3RcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1pZGRsZXdhcmVzICgpIHtcbiAgICB0aGlzLmFwcC51c2UoY29ycygpKTtcbiAgICB0aGlzLmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuXG4gICAgLyoqXG4gICAgICogU2VjdXJpdHkgaGVhZGVycyB0byBiZSBhdHRhY2hlZCB3aXRoIHJlcXVlc3RzXG4gICAgICovXG4gICAgdGhpcy5hcHAudXNlKGhlbG1ldCgpKTtcblxuICAgIC8qKlxuICAgICAqIEZvciBsb2cgcmVsYXRlZCBzZXJ2aWNlcyAtIG9ubHkgZm9yIGRldiBzZXJ2ZXJcbiAgICAgKi9cbiAgICBpZiAoTk9ERV9FTlYgPT0gXCJkZXZlbG9wbWVudFwiIHx8IE5PREVfRU5WID09IFwidGVzdFwiKSB7XG4gICAgICBjb25zdCBhY2Nlc3NMb2dTdHJlYW06IGZzLldyaXRlU3RyZWFtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oXG4gICAgICAgIHRoaXMubG9nUGF0aCxcbiAgICAgICAge1xuICAgICAgICAgIGZsYWdzOiBcImFcIixcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgICB0aGlzLmFwcC51c2UoXG4gICAgICAgIG1vcmdhbihcImNvbW1vblwiLCB7XG4gICAgICAgICAgc3RyZWFtOiBhY2Nlc3NMb2dTdHJlYW0sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU1pc2NSb3V0ZXMgPSAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogQmFzZSByb3V0ZSAtIHRvIGNoZWNrIEFQSSBoZWFsdGhcbiAgICAgKi9cbiAgICB0aGlzLmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlcnZlcjogXCJCYXNlLUhlYWx0aHlcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSGFuZGxpbmcgYWxsIHVuZGVmaW5lZCByb3V0ZXNcbiAgICAgKi9cbiAgICB0aGlzLmFwcC5hbGwoXCIqXCIsIChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJSZXF1ZXN0ZWQgcm91dGUgZG9lc24ndCBleGlzdCAtIDQwNFwiLFxuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyaW5nIGEgbWlkZGxld2FyZSBmb3IgZXhwcmVzcyBzZXNzaW9uIHRvIHdvcmsgd2l0aCByZWRpcyBjYWNoZVxuICAgKi9cbiAgcHJpdmF0ZSBjb25maWd1cmVFeHByZXNzU2Vzc2lvbk1pZGRsZXdhcmUgPSAoKSA9PiB7XG4gICAgdGhpcy5hcHAudXNlKFxuICAgICAgc2Vzc2lvbih7XG4gICAgICAgIC4uLlNFU1NJT05fT1BUSU9OUyxcblxuICAgICAgICAvL21ha2luZyB1c2Ugb2YgcmVkaXNTdG9yZSBpbnN0YW50aWF0ZWQgZnJvbSBjYWNoZSBzZXJ2aWNlXG4gICAgICAgIHN0b3JlOiB0aGlzLnJlZGlzU3RvcmUsXG4gICAgICB9KSxcbiAgICApO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBBcHA7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZSIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyZXF1aXJlIiwicHJvY2VzcyIsImVudiIsIlJFRElTX1BPUlQiLCJSRURJU19IT1NUIiwiUkVESVNfUEFTU1dPUkQiLCJSRURJU19PUFRJT05TIiwicG9ydCIsImhvc3QiLCJwYXNzd29yZCIsIlBPU1RHUkVTUUxfVVNFUiIsIlBPU1RHUkVTUUxfUEFTU1dPUkQiLCJQT1NUR1JFU1FMX1BPUlQiLCJQT1NUR1JFU1FMX0hPU1QiLCJEQVRBQkFTRV9VUkwiLCJTRVNTSU9OX1NFQ1JFVCIsIlNFU1NJT05fTkFNRSIsIlNFU1NJT05fVElNRU9VVCIsIlNFU1NJT05fT1BUSU9OUyIsInNlY3JldCIsIm5hbWUiLCJjb29raWUiLCJtYXhBZ2UiLCJzZWN1cmUiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInJvbGxpbmciLCJQT1JUIiwiY29uZmlnIiwiQ29uZmlndXJlUmVkaXMiLCJ0aGlzIiwiUmVkaXNTdG9yZSIsImNvbm5lY3RSZWRpcyIsInNlc3Npb24iLCJyZWRpc0NsaWVudCIsIlJlZGlzIiwib24iLCJjbGllbnQiLCJBcHAiLCJwYXRoIiwiX19kaXJuYW1lIiwiYXBwIiwicmVxIiwicmVzIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZGF0YSIsInNlcnZlciIsImFsbCIsInVzZSIsInN0b3JlIiwicmVkaXNTdG9yZSIsImV4cHJlc3MiLCJpbml0aWFsaXplTWlkZGxld2FyZXMiLCJoYW5kbGVNaXNjUm91dGVzIiwiY29uZmlndXJlRXhwcmVzc1Nlc3Npb25NaWRkbGV3YXJlIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImNvcnMiLCJoZWxtZXQiXSwic291cmNlUm9vdCI6IiJ9